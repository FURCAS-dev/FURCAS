<?xml version="1.0" encoding="utf-8"?>
<?eclipse version="3.2"?>
<fragment>

	<!-- ======================================================================================= -->
	<!-- Tests						                                                             -->
	<!-- ======================================================================================= -->
	<extension point="com.sap.ide.junit.insideTests">
		<testsuite class="com.sap.mi.fwk.ui.test.suites.MiFwkUiTests"
			name="Moin in Eclipse: BI: UI Tests" runMode="otherThread"
			runModeForNestedTests="otherThread" />
		<testsuite
			class="com.sap.mi.fwk.ui.test.suites.MiFwkUiUnitTests"
			name="Moin in Eclipse: BI: Unit Tests" />
		<testsuite
			class="com.sap.mi.fwk.ui.test.suites.MiFwkUiTestsStaged"
			name="Moin in Eclipse: BI: UI Staged" runMode="uiThread"
			runModeForNestedTests="otherThread" />
	</extension>

	<!-- ======================================================================================= -->
	<!-- Commands					                                                             -->
	<!-- ======================================================================================= -->
	<extension point="org.eclipse.ui.commands">
		<command categoryId="org.eclipse.ui.category.project"
			description="" id="com.sap.mi.fwk.ui.commands.migratePartitions"
			name="Migrate Partitions">
		</command>
	</extension>

	<!-- ======================================================================================= -->
	<!-- Handlers					                                                             -->
	<!-- ======================================================================================= -->
	<extension point="org.eclipse.ui.handlers">
		<handler
			class="com.sap.mi.fwk.ui.test.helper.MigratePartitionsAction"
			commandId="com.sap.mi.fwk.ui.commands.migratePartitions">
			<activeWhen>
				<reference
					definitionId="com.sap.mi.fwk.expressions.moinProjects">
				</reference>
			</activeWhen>
		</handler>
		<handler class="com.sap.mi.fwk.ui.handler.CopyHandler"
			commandId="org.eclipse.ui.edit.copy">
			<activeWhen>
				<reference
					definitionId="com.sap.mi.fwk.ui.test.isNodeComponent">
				</reference>
			</activeWhen>
		</handler>
		<handler class="com.sap.mi.fwk.ui.handler.PasteHandler"
			commandId="org.eclipse.ui.edit.paste">
			<activeWhen>
				<reference
					definitionId="com.sap.mi.fwk.ui.test.isNodeComponent">
				</reference>
			</activeWhen>
		</handler>
	</extension>

	<!-- ======================================================================================= -->
	<!-- Menus						                                                             -->
	<!-- ======================================================================================= -->
	<extension point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="popup:com.sap.mi.fwk.ui.menu.modeling?after=group.partition.end">
			<command
				commandId="com.sap.mi.fwk.ui.commands.migratePartitions"
				label="Migrate Partitions">
			</command>
		</menuContribution>
		<menuContribution
			locationURI="popup:org.eclipse.ui.popup.any?after=additions">
			<command commandId="org.eclipse.ui.edit.copy">
				<visibleWhen>
					<reference
						definitionId="com.sap.mi.fwk.ui.test.isNodeComponent">
					</reference>
				</visibleWhen>
			</command>
		</menuContribution>
		<menuContribution
			locationURI="popup:org.eclipse.ui.popup.any?after=additions">
			<command commandId="org.eclipse.ui.edit.paste">
				<visibleWhen>
					<reference
						definitionId="com.sap.mi.fwk.ui.test.isNodeComponent">
					</reference>
				</visibleWhen>
			</command>
		</menuContribution>
	</extension>

	<!-- ======================================================================================= -->
	<!-- Wizards					                                                             -->
	<!-- ======================================================================================= -->
	<extension point="org.eclipse.ui.newWizards">
		<wizard category="com.sap.mi.fwk.ui.test.wizards"
			class="com.sap.mi.fwk.ui.test.wizards.TestNewWizard"
			id="com.sap.mi.fwk.ui.test.newwizard"
			name="Test for Custom DC New Wizard" project="true" />
		<category id="com.sap.mi.fwk.ui.test.wizards" name="Moin Test" />
	</extension>

	<!-- ======================================================================================= -->
	<!-- Perspective Extensions		                                                             -->
	<!-- ======================================================================================= -->
	<extension point="org.eclipse.ui.perspectiveExtensions">
		<perspectiveExtension
			targetID="org.eclipse.ui.resourcePerspective">
			<newWizardShortcut id="com.sap.mi.fwk.ui.test.newwizard" />
		</perspectiveExtension>
	</extension>

	<!-- ======================================================================================= -->
	<!-- OCL Quickfixes				                                                             -->
	<!-- ======================================================================================= -->
	<extension point="com.sap.mi.fwk.ui.oclQuickfix">
		<violation violationID="test violation id">
			<quickfix
				quickfixClass="com.sap.mi.fwk.ui.test.TestQuickfix">
			</quickfix>
			<quickfix
				quickfixClass="com.sap.mi.fwk.ui.test.TestQuickfix">
			</quickfix>
		</violation>
	</extension>

	<!-- ======================================================================================= -->
	<!-- Markers					                                                             -->
	<!-- ======================================================================================= -->
	<extension id="testmarker" name="Marker for Testing"
		point="org.eclipse.core.resources.markers">
		<super type="org.eclipse.core.resources.problemmarker"></super>
		<persistent value="true"></persistent>
	</extension>
	<extension id="problemmarker" name="MIE Problem Marker"
		point="org.eclipse.core.resources.markers">
		<super type="org.eclipse.core.resources.problemmarker" />
		<persistent value="true" />
	</extension>

	<!-- ======================================================================================= -->
	<!-- Marker Resolutions			                                                             -->
	<!-- ======================================================================================= -->
	<extension point="org.eclipse.ui.ide.markerResolution">
		<markerResolutionGenerator
			class="com.sap.mi.fwk.ui.internal.constraints.ResolutionGenerator"
			markerType="com.sap.mi.fwk.ui.test.testmarker">
		</markerResolutionGenerator>
		<markerResolutionGenerator
			class="com.sap.mi.fwk.ui.test.quickfix.MarkerResolutionGenerator"
			markerType="com.sap.mi.fwk.test.editor.problemmarker" />
	</extension>

	<!-- ======================================================================================= -->
	<!-- Views						                                                             -->
	<!-- ======================================================================================= -->
	<extension point="org.eclipse.ui.views">
		<view name="Test View for RefObject Property Support"
			icon="resources/sample.gif" class="com.sap.mi.fwk.ui.test.TestView"
			id="com.sap.mi.fwk.ui.test.views.refObjectProperties">
		</view>
	</extension>

	<!-- ======================================================================================= -->
	<!-- Editors					                                                             -->
	<!-- ======================================================================================= -->
	<extension point="org.eclipse.ui.editors">
		<editor class="com.sap.mi.fwk.ui.test.editors.TestEditor"
			icon="resources/sample.gif" id="com.sap.mi.fwk.ui.test.TestEditor"
			name="TestEditor" />
		<editor class="com.sap.mi.fwk.ui.test.editors.SimpleViewEditor"
			default="false" icon="resources/View.gif"
			id="com.sap.mi.fwk.test.editors.SimpleViewEditor"
			name="Simple View Editor" />
		<editor class="com.sap.mi.fwk.ui.test.editors.ViewEditor"
			default="false" icon="resources/ViewEditor.gif"
			id="com.sap.mi.fwk.test.editors.ViewEditor" name="View Editor" />
	</extension>

	<!-- ======================================================================================= -->
	<!-- Editor Associations		                                                             -->
	<!-- ======================================================================================= -->
	<extension
		point="com.sap.mi.fwk.ui.modelObjectEditorAssociations">
		<association canHandleChildren="true" default="true"
			editorId="com.sap.mi.fwk.test.editors.ViewEditor"
			objectClass="com.sap.ide.metamodel.webdynpro.component.view.View">
		</association>
		<association canHandleChildren="true"
			editorId="com.sap.mi.fwk.test.editors.SimpleViewEditor"
			objectClass="com.sap.ide.metamodel.webdynpro.component.view.View">
		</association>
		<association
			objectClass="com.sap.ide.metamodel.webdynpro.component.view.AbstractView"
			editorId="com.sap.mi.fwk.ui.test.TestEditor"
			inputFactory="com.sap.mi.fwk.ui.test.editors.TestInputFactory"
			default="false" canHandleChildren="false">
		</association>
	</extension>

	<!-- ======================================================================================= -->
	<!-- Tabbed Property Contributors                                                            -->
	<!-- ======================================================================================= -->
	<extension
		point="org.eclipse.ui.views.properties.tabbed.propertyContributor">
		<propertyContributor
			contributorId="com.sap.mi.fwk.ui.test.editors.SampleViewEditor"
			labelProvider="com.sap.mi.fwk.ui.properties.DefaultTabbedLabelProvider">
			<propertyCategory
				category="com.sap.mi.fwk.ui.test.editors.SampleViewEditor.category" />
		</propertyContributor>
	</extension>

	<!-- ======================================================================================= -->
	<!-- Tabbed Property Tabs	 		                                                         -->
	<!-- ======================================================================================= -->
	<extension
		point="org.eclipse.ui.views.properties.tabbed.propertyTabs">
		<propertyTabs
			contributorId="com.sap.mi.fwk.ui.test.editors.SampleViewEditor">
			<propertyTab
				category="com.sap.mi.fwk.ui.test.editors.SampleViewEditor.category"
				id="com.sap.mi.fwk.ui.test.editors.SampleViewEditor.tab"
				label="my label" />
		</propertyTabs>
	</extension>

	<!-- ======================================================================================= -->
	<!-- Tabbed Property Sections		                                                         -->
	<!-- ======================================================================================= -->
	<extension
		point="org.eclipse.ui.views.properties.tabbed.propertySections">
		<propertySections
			contributorId="com.sap.mi.fwk.ui.test.editors.SampleViewEditor">
			<propertySection
				class="com.sap.mi.fwk.ui.properties.DefaultPropertySection"
				id="com.sap.mi.fwk.ui.test.editors.SampleViewEditor.section"
				tab="com.sap.mi.fwk.ui.test.editors.SampleViewEditor.tab">
				<input type="com.sap.tc.moin.repository.mmi.reflect.RefBaseObject" />
			</propertySection>
		</propertySections>
	</extension>



	<!-- ======================================================================================= -->
	<!-- Navigator Viewer			                                                             -->
	<!-- ======================================================================================= -->
	<extension id="com.sap.mi.fwk.ui.test"
		point="org.eclipse.ui.navigator.viewer">
		<viewerContentBinding
			viewerId="org.eclipse.ui.navigator.ProjectExplorer">
			<includes>
				<contentExtension
					pattern="com.sap.mi.fwk.ui.test.navigatorContent.co" />
			</includes>
		</viewerContentBinding>
	</extension>

	<!-- ======================================================================================= -->
	<!-- Navigator Content			                                                             -->
	<!-- ======================================================================================= -->
	<extension point="org.eclipse.ui.navigator.navigatorContent">
		<navigatorContent activeByDefault="true"
			contentProvider="com.sap.mi.fwk.ui.test.tree.NavigatorTreeContentProvider"
			icon="resources/sample.gif"
			id="com.sap.mi.fwk.ui.test.navigatorContent.co"
			labelProvider="com.sap.mi.fwk.ui.test.tree.NavigatorLabelProvider"
			name="Components" priority="normal">
			<triggerPoints>
    <and>
       <or>
          <and>
             <instanceof
                   value="org.eclipse.core.resources.IProject">
             </instanceof>
             <test
                   property="org.eclipse.core.resources.projectNature"
                   value="com.sap.mi.fwk.dcfwk.MoinNature">
             </test>
             <test
                   property="org.eclipse.core.resources.projectNature"
                   value="com.sap.tc.moin.nwdi.dctype.MoinNature">
             </test>
             <test
                   property="org.eclipse.core.resources.name"
                   value="*navigatortreedragdrop*">
             </test>
          </and>
          <instanceof
                value="com.sap.mi.fwk.ui.test.tree.NavigatorTreeContentProvider$NodeComponent">
          </instanceof>
       </or>
    </and>
			</triggerPoints>
			<dropAssistant
				class="com.sap.mi.fwk.ui.tree.dnd.TreeNodeNavigatorDropAssistant"
				id="com.sap.mi.fwk.ui.test.TreeNodeDropAssistant">
				<possibleDropTargets>
					<instanceof
						value="com.sap.mi.fwk.ui.test.tree.NavigatorTreeContentProvider$NodeComponent">
					</instanceof>

				</possibleDropTargets>
			</dropAssistant>
		</navigatorContent>
	</extension>
	<extension point="org.eclipse.core.expressions.definitions">
		<definition id="com.sap.mi.fwk.ui.test.isNodeComponent">
			<iterate ifEmpty="false" operator="or">
				<instanceof
					value="com.sap.mi.fwk.ui.test.tree.NavigatorTreeContentProvider$NodeComponent">
				</instanceof>
			</iterate>
		</definition>
	</extension>

</fragment>
