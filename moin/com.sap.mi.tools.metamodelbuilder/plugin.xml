<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.2"?>
<plugin>
	<extension id="MetamodelBuilder" name="Metamodel Project Builder"
		point="org.eclipse.core.resources.builders">
		<builder hasNature="true">
			<run class="com.sap.mi.tools.mmbuilder.internal.MetamodelBuilder">
			</run>
		</builder>
	</extension>
	<extension id="metamodelBuildNature" name="Metamodel Build Nature"
		point="org.eclipse.core.resources.natures">
		<runtime>
			<run class="com.sap.mi.tools.mmbuilder.internal.MetamodelBuildNature">
			</run>
		</runtime>
		<builder id="com.sap.mi.tools.metamodelbuilder.MetamodelBuilder">
		</builder>
	</extension>
	<extension point="org.eclipse.ui.commands">
		<command description="%addnature.description"
			id="com.sap.mi.tools.metamodelbuilder.addnature" name="%addnature">
		</command>
		<command description="%removenature.description"
			id="com.sap.mi.tools.metamodelbuilder.removenature" name="%removenature">
		</command>
		<command description="%convertxmi.description"
			id="com.sap.mi.tools.metamodelbuilder.convertxmi" name="%convertxmi">
		</command>
	</extension>
	<extension point="org.eclipse.ui.menus">
		<menuContribution locationURI="popup:org.eclipse.ui.popup.any?after=additions">
			<menu label="%menu.label" tooltip="%menu.description">
				<visibleWhen>
					<iterate ifEmpty="false" operator="or">
						<reference definitionId="com.sap.mi.tools.metamodelbuilder.pluginProject">
						</reference>
					</iterate>
				</visibleWhen>
				<command commandId="com.sap.mi.tools.metamodelbuilder.addnature" tooltip="%addnature.description">
				</command>
				<command commandId="com.sap.mi.tools.metamodelbuilder.removenature" tooltip="%removenature.description">
				</command>
				<separator
					name="com.sap.mi.tools.metamodelbuilder_CoreDev_stream.separator1"
					visible="true">
				</separator>
				<command commandId="com.sap.mi.tools.metamodelbuilder.convertxmi" tooltip="%convertxmi.description">
				</command>
			</menu>
		</menuContribution>
	</extension>
	<extension point="org.eclipse.ui.handlers">
		<handler class="com.sap.mi.tools.mmbuilder.AddNatureHandler"
			commandId="com.sap.mi.tools.metamodelbuilder.addnature">
			<activeWhen>
				<iterate
          ifEmpty="false"
          operator="or">
					<not>
						<reference definitionId="com.sap.mi.tools.metamodelbuilder.mmBuilderProjects">
						</reference>
					</not>
				</iterate>
			</activeWhen>
			<enabledWhen>
				<iterate
          ifEmpty="false"
          operator="or">
					<not>
						<reference definitionId="com.sap.mi.tools.metamodelbuilder.mmBuilderProjects">
						</reference>
					</not>
				</iterate>
			</enabledWhen>
		</handler>
		<handler class="com.sap.mi.tools.mmbuilder.internal.RemoveNatureHandler"
			commandId="com.sap.mi.tools.metamodelbuilder.removenature">
			<activeWhen>
				<iterate
          ifEmpty="false"
          operator="or">
					<reference definitionId="com.sap.mi.tools.metamodelbuilder.mmBuilderProjects">
					</reference>
				</iterate>
			</activeWhen>
			<enabledWhen>
				<iterate
          ifEmpty="false"
          operator="or">
					<reference definitionId="com.sap.mi.tools.metamodelbuilder.mmBuilderProjects">
					</reference>
				</iterate>
			</enabledWhen>
		</handler>
		<handler class="com.sap.mi.tools.mmbuilder.internal.ConvertXMIHandler"
			commandId="com.sap.mi.tools.metamodelbuilder.convertxmi">
			<activeWhen>
				<iterate
          ifEmpty="false"
          operator="or">
					<reference definitionId="com.sap.mi.tools.metamodelbuilder.mmBuilderProjects">
					</reference>
				</iterate>
			</activeWhen>
			<enabledWhen>
				<iterate
          ifEmpty="false"
          operator="or">
					<reference definitionId="com.sap.mi.tools.metamodelbuilder.mmBuilderProjects">
					</reference>
				</iterate>
			</enabledWhen>
		</handler>
	</extension>
	<extension point="org.eclipse.core.expressions.definitions">
		<definition id="com.sap.mi.tools.metamodelbuilder.mmBuilderProjects">
			<adapt type="org.eclipse.core.resources.IProject">
				<test property="org.eclipse.core.resources.projectNature"
					value="com.sap.mi.tools.metamodelbuilder.metamodelBuildNature">
				</test>
			</adapt>
		</definition>
		<definition id="com.sap.mi.tools.metamodelbuilder.pluginProject">
			<adapt type="org.eclipse.core.resources.IProject">
				<test property="org.eclipse.core.resources.projectNature"
					value="org.eclipse.pde.PluginNature">
				</test>
			</adapt>
		</definition>
	</extension>
</plugin>
