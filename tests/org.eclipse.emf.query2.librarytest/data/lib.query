//import "platform:/resource/org.eclipse.emf.query2.librarytest/model/Library.ecore"
import "http://eclipse.org/modeling/emf/query/1.0.0"  

AllPersons : select p from Person as p

AllBooks : select p from Book as p

PersonByName : select p from Person as p where p.name = 'Merk'

PagesByTitle: select a.pages from Manuscript as a where a.title like 'Linux Made Easy'

PagesAndTitle: select a.title, a.pages from Manuscript as a

PagesAndTitleByAuthor: select a.pages, a.title from Manuscript as a, Person as p 
	where a.author = p 
		and p.name like 'Boger, Marko' 

// here we get an ex. because of long/int		
// BooksWithMoreThan250Pages: select b from Book as b, Manuscript as m where b.instanceOf = m and m.pages>=250

Test: select p from Person as p, Manuscript as m where m.author = p

AllBooksBorrowedByAnAuthor: select b from Book as b 
	where b.borrowedBy in (
		select p from Person as p, Manuscript as m where m.author = p
	)

/* SLOW	
ManuscriptsInBerlinOrHamburg: select m from Manuscript as m, Book as b, Library as lib 
	where (lib.location='Berlin' or lib.location='Hamburg')
		and lib.books = b
		and b.instanceOf = m

BooksBorrowedByPersonPublishedByDPunkt: select b from Book as b, Person as p, Publisher as pub, Manuscript as m 
	where b.borrowedBy=p 
		and p.name='Boger, Marko' 
		and b.instanceOf=m 
		and pub.manuscripts = m 
		and pub.name like 'dpunkt'
*/		
// Refactor query to look like that:
//BooksBorrowedByPersonPublishedByDPunkt: select b from Book as b, Person as p, Publisher as pub 
//	where b.borrowedBy.name='Boger, Marko' 
//		and b.instanceOf=pub.manuscripts 
//		and pub.name like 'dpunkt'			